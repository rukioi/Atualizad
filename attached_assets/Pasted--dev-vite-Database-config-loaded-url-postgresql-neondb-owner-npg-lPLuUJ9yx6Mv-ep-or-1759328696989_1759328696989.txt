> dev
> vite

Database config loaded: {
  url: 'postgresql://neondb_owner:npg_lPLuUJ9yx6Mv@ep-oran...',
  environment: 'development'
}

  VITE v6.3.5  ready in 546 ms

  ➜  Local:   http://localhost:5000/
  ➜  Network: http://172.31.105.66:5000/
  ➜  press h + enter to show help
✅ Database connection successful
✅ Database connected successfully
Admin auth attempt: {
  hasAuthHeader: true,
  hasToken: true,
  tokenPreview: 'mock-admin-token-175...'
}
Using mock admin token for development
Admin auth attempt: {
  hasAuthHeader: true,
  hasToken: true,
  tokenPreview: 'mock-admin-token-175...'
}
Using mock admin token for development
Tenant bbb534c9-b187-4e5e-84f6-d80c9c39eae4 (Murilo) has 1 users
Login attempt: { email: 'murilo@hotmail.com' }
Login successful: { userId: '23be9abc-2870-4424-a21d-3443bda84e5b', tenantId: undefined }
Ensuring schema exists: tenant_1759328558915_x7a3eq for tenant: bbb534c9-b187-4e5e-84f6-d80c9c39eae4
Ensuring schema exists: tenant_1759328558915_x7a3eq for tenant: bbb534c9-b187-4e5e-84f6-d80c9c39eae4
Schema tenant_1759328558915_x7a3eq already exists
Schema tenant_1759328558915_x7a3eq already exists
Tenant access validated: {
  userId: '23be9abc-2870-4424-a21d-3443bda84e5b',
  tenantId: 'bbb534c9-b187-4e5e-84f6-d80c9c39eae4',
  tenantName: 'Murilo',
  accountType: 'COMPOSTA'
}
Error getting dashboard metrics: TypeError: projectsService.getProjectsStats is not a function
    at DashboardService.getDashboardMetrics (file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:3132:23)
    at file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:3540:44
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/runner/workspace/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/node_modules/express/lib/router/index.js:280:10)
    at validateTenantAccess (file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:3523:5)
file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:1776
  return await tenantDB2.executeInTenantSchema(query, params);
                         ^

TypeError: tenantDB2.executeInTenantSchema is not a function
    at queryTenantSchema (file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:1776:26)
    at ClientsService.ensureTables (file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:1845:11)
    at ClientsService.getClientsStats (file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:2012:16)
    at DashboardService.getDashboardMetrics (file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:3131:22)
    at file:///home/runner/workspace/node_modules/.vite-temp/vite.config.ts.timestamp-1759328625116-72a2d39baf5a1.mjs:3540:44
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/node_modules/express/lib/router/index.js:284:15
